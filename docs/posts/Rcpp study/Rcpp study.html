<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Creo Hsia">
<meta name="dcterms.date" content="2024-10-10">
<meta name="description" content="Record my study in Rcpp">

<title>Rcpp Study Record – Creo Hsia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Creo Hsia</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blogs</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/CreoHAHAHA"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/CreoHsia"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:creoxjz@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Rcpp Study Record</h1>
                  <div>
        <div class="description">
          Record my study in Rcpp
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Creo Hsia </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 10, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#rcpp" id="toc-rcpp" class="nav-link active" data-scroll-target="#rcpp"><span class="header-section-number">1</span> Rcpp</a>
  <ul class="collapse">
  <li><a href="#format-for-defining-a-function-in-rcpp" id="toc-format-for-defining-a-function-in-rcpp" class="nav-link" data-scroll-target="#format-for-defining-a-function-in-rcpp"><span class="header-section-number">1.1</span> Format for defining a function in Rcpp</a></li>
  <li><a href="#compiling-the-code" id="toc-compiling-the-code" class="nav-link" data-scroll-target="#compiling-the-code"><span class="header-section-number">1.2</span> Compiling the code</a></li>
  <li><a href="#executing-the-function" id="toc-executing-the-function" class="nav-link" data-scroll-target="#executing-the-function"><span class="header-section-number">1.3</span> Executing the function</a></li>
  <li><a href="#embedding-rcpp-code-in-our-r-code" id="toc-embedding-rcpp-code-in-our-r-code" class="nav-link" data-scroll-target="#embedding-rcpp-code-in-our-r-code"><span class="header-section-number">1.4</span> Embedding Rcpp code in our R code</a></li>
  <li><a href="#c-11" id="toc-c-11" class="nav-link" data-scroll-target="#c-11"><span class="header-section-number">1.5</span> C++ 11</a></li>
  <li><a href="#printing-messages" id="toc-printing-messages" class="nav-link" data-scroll-target="#printing-messages"><span class="header-section-number">1.6</span> Printing Messages</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"><span class="header-section-number">1.7</span> Data Types</a></li>
  <li><a href="#vector" id="toc-vector" class="nav-link" data-scroll-target="#vector"><span class="header-section-number">1.8</span> Vector</a></li>
  <li><a href="#matrix" id="toc-matrix" class="nav-link" data-scroll-target="#matrix"><span class="header-section-number">1.9</span> Matrix</a></li>
  <li><a href="#vector-operations" id="toc-vector-operations" class="nav-link" data-scroll-target="#vector-operations"><span class="header-section-number">1.10</span> Vector operations</a></li>
  <li><a href="#logical-operations" id="toc-logical-operations" class="nav-link" data-scroll-target="#logical-operations"><span class="header-section-number">1.11</span> Logical operations</a></li>
  <li><a href="#data-frame" id="toc-data-frame" class="nav-link" data-scroll-target="#data-frame"><span class="header-section-number">1.12</span> Data frame</a></li>
  <li><a href="#list" id="toc-list" class="nav-link" data-scroll-target="#list"><span class="header-section-number">1.13</span> List</a></li>
  <li><a href="#s3s4-class" id="toc-s3s4-class" class="nav-link" data-scroll-target="#s3s4-class"><span class="header-section-number">1.14</span> <code>S3``S4</code> class</a></li>
  <li><a href="#string" id="toc-string" class="nav-link" data-scroll-target="#string"><span class="header-section-number">1.15</span> String</a></li>
  <li><a href="#date-and-datevector" id="toc-date-and-datevector" class="nav-link" data-scroll-target="#date-and-datevector"><span class="header-section-number">1.16</span> Date and DateVector</a></li>
  <li><a href="#robject" id="toc-robject" class="nav-link" data-scroll-target="#robject"><span class="header-section-number">1.17</span> RObject</a></li>
  <li><a href="#cautions-in-handling-rcpp-objects" id="toc-cautions-in-handling-rcpp-objects" class="nav-link" data-scroll-target="#cautions-in-handling-rcpp-objects"><span class="header-section-number">1.18</span> Cautions in handling Rcpp objects</a></li>
  <li><a href="#r-like-functions" id="toc-r-like-functions" class="nav-link" data-scroll-target="#r-like-functions"><span class="header-section-number">1.19</span> R-like functions</a></li>
  <li><a href="#probability-distribution" id="toc-probability-distribution" class="nav-link" data-scroll-target="#probability-distribution"><span class="header-section-number">1.20</span> Probability distribution</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="rcpp" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Rcpp</h1>
<section id="format-for-defining-a-function-in-rcpp" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="format-for-defining-a-function-in-rcpp"><span class="header-section-number">1.1</span> Format for defining a function in Rcpp</h2>
<p>The following code shows the basic format for defining a Rcpp function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include</span><span class="im">&lt;Rcpp.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> Rcpp<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>RETURN_TYPE FUNCTION_NAME<span class="op">(</span>ARGUMENT_TYPE ARGUMENT<span class="op">){</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">//do something</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> RETURN_VALUE<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>#include&lt;Rcpp.h&gt;</code> : This sentence enables us to use classes and functions defined by the Rcpp package</p></li>
<li><p><code>using namespace Rcpp;</code> : this sentence enables us to use them directly, other wise you need to declare that we use these function from package Rcpp by, e.g.&nbsp;<code>Rcpp::NumericVector</code>.</p></li>
</ul>
<!-- -->
<ul>
<li><p><code>// [[Rcpp::export]]</code>：The function defined just below this sentence will be accessible from R.</p></li>
<li><p><code>RETURN_TYPE FUNCTION_NAME(ARGUMENT_TYPE ARGUMENT){}</code>：We need to specify data types of functions and arguments.</p></li>
</ul>
</section>
<section id="compiling-the-code" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="compiling-the-code"><span class="header-section-number">1.2</span> Compiling the code</h2>
<p>The function <code>Rcpp::sourceCpp()</code> will compile your source code and load the defined function into R. The below code defines a function that calculates the sum of a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">//sum.cpp</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Rcpp.h&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> Rcpp<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> rcpp_sum<span class="op">(</span>NumericVector v<span class="op">){</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>v<span class="op">.</span>length<span class="op">();</span> <span class="op">++</span>i<span class="op">){</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> v<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span><span class="op">(</span>sum<span class="op">);</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can load it into R by</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rcpp)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="st">'sum.cpp'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="executing-the-function" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="executing-the-function"><span class="header-section-number">1.3</span> Executing the function</h2>
<p>We can use our Rcpp functions as usual R functions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rcpp_sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 55</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="embedding-rcpp-code-in-our-r-code" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="embedding-rcpp-code-in-our-r-code"><span class="header-section-number">1.4</span> Embedding Rcpp code in our R code</h2>
<p>We can write Rcpp code in our R code in 3 ways.</p>
<section id="sourcecpp" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="sourcecpp"><span class="header-section-number">1.4.1</span> <code>sourceCpp()</code></h3>
<p>Save Rcpp code as string object in R and compile it with <code>sourceCpp()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>src <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="st">"#include &lt;Rcpp.h&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">using namespace Rcpp;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">// [[Rcpp::export]]</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">double rcpp_sum(NumericVector v){</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">  double sum = 0;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">  for(int i=0; i&lt;v.length(); ++i){</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">    sum += v[i];</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="st">  return(sum);</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="st">}"</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="at">code =</span> src)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">rcpp_sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 55</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cppfunction" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="cppfunction"><span class="header-section-number">1.4.2</span> <code>cppFunction()</code></h3>
<p>We can omit <code>#include &lt;Rcpp.h&gt;</code> and <code>using namespase Rcpp</code> when we use <code>cppFunction()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>src <span class="ot">&lt;-</span><span class="st">"double rcpp_sum(NumericVector v){</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="st">    double sum = 0;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st">    for(int i=0; i&lt;v.length(); ++i){</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="st">      sum += v[i];</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="st">    return(sum);</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>Rcpp<span class="sc">::</span><span class="fu">cppFunction</span>(src)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rcpp_sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 55</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="evalcpp" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="evalcpp"><span class="header-section-number">1.4.3</span> <code>evalCpp()</code></h3>
<p>You can evaluate a single C++ statement by using <code>evalCpp()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Showing maximum value of double.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">evalCpp</span>(<span class="st">'std::numeric_limits&lt;double&gt;::max()'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.797693e+308</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="c-11" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="c-11"><span class="header-section-number">1.5</span> C++ 11</h2>
<p>C++ 11 is a standard of C++ newly established in 2011. Many new features have been added to make C++ even easier for beginners.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The code examples in this document are written with C++11 enabled.</p>
</div>
</div>
<section id="enabling-c11" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="enabling-c11"><span class="header-section-number">1.5.1</span> Enabling C++11</h3>
<p>To enable <code>C++11</code>, add the following decription in our Rcpp code. &gt; <code>// [[Rcpp::plugins("cpp11")]]</code></p>
</section>
<section id="recommended-c11-features" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="recommended-c11-features"><span class="header-section-number">1.5.2</span> Recommended C++11 features</h3>
<section id="initializer-list" class="level4" data-number="1.5.2.1">
<h4 data-number="1.5.2.1" class="anchored" data-anchor-id="initializer-list"><span class="header-section-number">1.5.2.1</span> Initializer list</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Initialize Vector</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">// The next three are the same as c (1, 2, 3).</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>NumericVector v1 <span class="op">=</span> NumericVector<span class="op">::</span>create<span class="op">(</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">);</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>NumericVector v2 <span class="op">=</span> <span class="op">{</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">};</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>NumericVector v3   <span class="op">{</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">};</span> <span class="co">// You can omit "=".</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="decltype" class="level4" data-number="1.5.2.2">
<h4 data-number="1.5.2.2" class="anchored" data-anchor-id="decltype"><span class="header-section-number">1.5.2.2</span> decltype</h4>
<p>By using decltype, you can declare a variable of the same type as an existing variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">decltype</span><span class="op">(</span>i<span class="op">)</span> x<span class="op">;</span> <span class="co">// variable "x" will be int</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="range-vased-for-loop" class="level4" data-number="1.5.2.3">
<h4 data-number="1.5.2.3" class="anchored" data-anchor-id="range-vased-for-loop"><span class="header-section-number">1.5.2.3</span> Range-vased for-loop</h4>
<p>We can write a for statement with the same style as R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>IntegerVector v <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">};</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum<span class="op">=</span><span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span><span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> x <span class="op">:</span> v<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  sum <span class="op">+=</span> x<span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><code>auto&amp; x</code>: The <code>auto&amp;</code> keyword means that each element in the vector v will be referenced as x. Using &amp; allows direct access to each element (by reference), but here it’s primarily for efficiency, so <strong>no copy of each element is made</strong>.</p>
</blockquote>
</section>
<section id="lambda-expression" class="level4" data-number="1.5.2.4">
<h4 data-number="1.5.2.4" class="anchored" data-anchor-id="lambda-expression"><span class="header-section-number">1.5.2.4</span> Lambda expression</h4>
<p>It is a function object created as an unnamed function and passed to the other function.</p>
<p>Lambda expressions are written in the form <code>[](){}</code></p>
<p><code>[]</code> specifies how the lambda should access variables from the surrounding scope. Here are the different options:</p>
<ul>
<li><p><code>[]</code> : Capture nothing. The lambda function cannot access any local variables from the surrounding scope.</p></li>
<li><p><code>[=]</code> : Capture all local variables by value. This means a copy of each variable is made, and the lambda works with the copy.</p></li>
<li><p><code>[&amp;]</code> : Capture all local variables by reference. The lambda can modify the original variables because it’s accessing them directly.</p></li>
<li><p>[=x, &amp;y]: Capture specific variables in different ways. In this example, the variable x will be captured by value (copied), and y will be captured by reference (accessed directly).</p></li>
</ul>
<p>The return type of this function object is automatically set to the type of the returned value described in <code>{}</code>. If you want to define return type explicitly, write it like <code>[]()-&gt;int{}</code>.</p>
<p><strong>Examples</strong></p>
<p>R example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fl">2.0</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(v, <span class="cf">function</span>(x){A<span class="sc">*</span>x})</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  2  4  6  8 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rcpp example We save it as <code>lambda.cpp</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Rcpp.h&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> Rcpp<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::plugins("cpp11")]]</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>NumericVector rcpp_lambda_1<span class="op">(){</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  NumericVector v <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span><span class="op">};</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> A <span class="op">=</span> <span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  NumericVector res <span class="op">=</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    sapply<span class="op">(</span>v<span class="op">,</span> <span class="op">[&amp;](</span><span class="dt">double</span> x<span class="op">){</span><span class="cf">return</span> A<span class="op">*</span>x<span class="op">;});</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> res<span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="st">'lambda.cpp'</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rcpp_lambda_1</span>()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  2  4  6  8 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="printing-messages" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="printing-messages"><span class="header-section-number">1.6</span> Printing Messages</h2>
<section id="rcout-rcerr" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="rcout-rcerr"><span class="header-section-number">1.6.1</span> <code>Rcout</code>, <code>Rcerr</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rcpp_rcout<span class="op">(</span>NumericVector v<span class="op">){</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// printing value of vector</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  Rcout <span class="op">&lt;&lt;</span> <span class="st">"The value of v : "</span> <span class="op">&lt;&lt;</span> v <span class="op">&lt;&lt;</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// printing error message</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  Rcerr <span class="op">&lt;&lt;</span> <span class="st">"Error message</span><span class="sc">\n</span><span class="st">"</span><span class="op">;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>This line declares a function named <code>rcpp_rcout</code> that takes a NumericVector as an argument and returns nothing (void).</p>
<p>Rcout is an Rcpp-specific object similar to the standard C++ <code>std::cout</code>, but it is used for printing messages to the R console. It uses <code>&lt;&lt;</code> to concatenate output.</p>
<p>Rcerr is similar to the standard C++ <code>std:cerr</code>, which is used for error messages and diagnostic output. Rcerr is used to send error or warning messages in R, so output sent through Rcerr might be displayed differently (in red text, depending on the R environment) to indicate an issue or warning.</p>
</blockquote>
</section>
<section id="rprintf-reprintf" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="rprintf-reprintf"><span class="header-section-number">1.6.2</span> <code>Rprintf()</code>, <code>REprintf()</code></h3>
<p>These functions are used to print formatted output to the R console. It allows you to format the output using placeholders (e.g., <code>%d</code> for integers, <code>%f</code> for floats).</p>
<p>Syntax:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Rprintf<span class="op">(</span> format<span class="op">,</span> variables<span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first argument is a format string, and subsequent arguments are the values to be inserted into the formatted string. Some format specifier is presented below:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th><strong>specifier</strong></th>
<th><strong>explanation</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>%i</code></td>
<td>printing signed integer (<code>int</code>)</td>
</tr>
<tr class="even">
<td><code>%u</code></td>
<td>printing unsigned integer (<code>unsigned int</code>)</td>
</tr>
<tr class="odd">
<td><code>%f</code></td>
<td>printing floating point number (<code>double</code>)</td>
</tr>
<tr class="even">
<td><code>%e</code></td>
<td>printing floating point number (<code>double</code>) in exponential style</td>
</tr>
<tr class="odd">
<td><code>%s</code></td>
<td>printing C string (<code>char*</code>)</td>
</tr>
</tbody>
</table>
<blockquote class="blockquote">
<p>Additionally, <code>Rprintf()</code> and <code>REprintf()</code> can only print data types that exist in standard C++ language, thus you cannot pass data types defined by Rcpp package (such as NumericVector) to Rprintf() directly. If you want to print the values of elements of an Rcpp vector using Rprintf(), you have to pass each element separately to it (see below).</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rcpp_rprintf<span class="op">(</span>NumericVector v<span class="op">){</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// printing values of all the elements of Rcpp vector  </span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>v<span class="op">.</span>length<span class="op">();</span> <span class="op">++</span>i<span class="op">){</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        Rprintf<span class="op">(</span><span class="st">"the value of v[</span><span class="sc">%i</span><span class="st">] : </span><span class="sc">%f</span><span class="st"> </span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> i<span class="op">,</span> v<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-types" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="data-types"><span class="header-section-number">1.7</span> Data Types</h2>
<p>All the basic data types and data structures provided by R are available in Rcpp. By using these data types, you can directly access the objects that exist in R. ### Vector and Matrix Following seven data types are often used in R.</p>
<p><code>logical</code> <code>integer</code> <code>numeric</code> <code>complex</code> <code>character</code> <code>Date</code> <code>POSIXct</code> ### Vector and matrix There are vector type and matrix types in Rcpp corresponding to those of R.</p>
<p>The table below presents the correspondence of data types between R/Rcpp/C++.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Value</strong></th>
<th><strong>R vector</strong></th>
<th><strong>Rcpp vector</strong></th>
<th><strong>Rcpp matrix</strong></th>
<th><strong>Rcpp scalar</strong></th>
<th><strong>C++ scalar</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Logical</td>
<td><code>logical</code></td>
<td><code>LogicalVector</code></td>
<td><code>LogicalMatrix</code></td>
<td>-</td>
<td><code>bool</code></td>
</tr>
<tr class="even">
<td>Integer</td>
<td><code>integer</code></td>
<td><code>IntegerVector</code></td>
<td><code>IntegerMatrix</code></td>
<td>-</td>
<td><code>int</code></td>
</tr>
<tr class="odd">
<td>Real</td>
<td><code>numeric</code></td>
<td><code>NumericVector</code></td>
<td><code>NumericMatrix</code></td>
<td>-</td>
<td><code>double</code></td>
</tr>
<tr class="even">
<td>Complex</td>
<td><code>complex</code></td>
<td><code>ComplexVector</code></td>
<td><code>ComplexMatrix</code></td>
<td><code>Rcomplex</code></td>
<td><code>complex</code></td>
</tr>
<tr class="odd">
<td>String</td>
<td><code>character</code></td>
<td><code>CharacterVector</code> (<code>StringVector</code>)</td>
<td><code>CharacterMatrix</code> (<code>StringMatrix</code>)</td>
<td><code>String</code></td>
<td><code>string</code></td>
</tr>
<tr class="even">
<td>Date</td>
<td><code>Date</code></td>
<td><code>DateVector</code></td>
<td>-</td>
<td><code>Date</code></td>
<td>-</td>
</tr>
<tr class="odd">
<td>Datetime</td>
<td><code>POSIXct</code></td>
<td><code>DatetimeVector</code></td>
<td>-</td>
<td><code>Datetime</code></td>
<td><code>time_t</code></td>
</tr>
</tbody>
</table>
<section id="data.frame-list-s3-s4" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="data.frame-list-s3-s4"><span class="header-section-number">1.7.1</span> data.frame, list, S3, S4</h3>
<p>Other than <code>Vector</code> and <code>Matrix</code>, There are several data structures in R such as <code>data.frame</code>, <code>list</code>, <code>S3 class</code> and <code>S4 class</code>. You can handle all of these data structures in Rcpp.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>R</strong></th>
<th><strong>Rcpp</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>data.frame</code></td>
<td><code>DataFrame</code></td>
</tr>
<tr class="even">
<td><code>list</code></td>
<td><code>List</code></td>
</tr>
<tr class="odd">
<td>S3 class</td>
<td><code>List</code></td>
</tr>
<tr class="even">
<td>S4 class</td>
<td><code>S4</code></td>
</tr>
</tbody>
</table>
<p>In Rcpp, Vector, DataFrame, List are all implemented as kinds of vectors. Namely, Vector is a vector that its elements are scalar values, DataFrame is a vector that its elements are Vectors, List is a vector that its elements are any kind of data types. Thus, Vector, DataFrame, List has many common member functions in Rcpp.</p>
</section>
</section>
<section id="vector" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="vector"><span class="header-section-number">1.8</span> Vector</h2>
<section id="creating-vector-object" class="level3" data-number="1.8.1">
<h3 data-number="1.8.1" class="anchored" data-anchor-id="creating-vector-object"><span class="header-section-number">1.8.1</span> Creating vector object</h3>
<p>We can create vector objects in several ways.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a Vector object equivalent to</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">// v &lt;- rep(0, 3)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="op">(</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">// v &lt;- rep(1, 3)</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="op">(</span><span class="dv">3</span><span class="op">,</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">// v &lt;- c(1,2,3) </span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">// C++11 Initializer list</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">};</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">// v &lt;- c(1,2,3)</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="op">=</span> NumericVector<span class="op">::</span>create<span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co">// v &lt;- c(x=1, y=2, z=3)</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="op">=</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  NumericVector<span class="op">::</span>create<span class="op">(</span>Named<span class="op">(</span><span class="st">"x"</span><span class="op">,</span><span class="dv">1</span><span class="op">),</span> Named<span class="op">(</span><span class="st">"y"</span><span class="op">)=</span><span class="dv">2</span> <span class="op">,</span> _<span class="op">[</span><span class="st">"z"</span><span class="op">]=</span><span class="dv">3</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-vector-elements" class="level3" data-number="1.8.2">
<h3 data-number="1.8.2" class="anchored" data-anchor-id="accessing-vector-elements"><span class="header-section-number">1.8.2</span> Accessing vector elements</h3>
<p>This Rcpp function demonstrates various ways of <strong>accessing and modifying</strong> elements of a NumericVector in R using different types of indices (numerical, integer, character, and logical).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rcpp_vector_access<span class="op">()</span> <span class="op">{</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Creating vector</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  NumericVector v  <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>A NumericVector v is created with five numeric elements: {10, 20, 30, 40, 50}.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Setting element names</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  v<span class="op">.</span>names<span class="op">()</span> <span class="op">=</span> CharacterVector<span class="op">({</span><span class="st">"A"</span><span class="op">,</span> <span class="st">"B"</span><span class="op">,</span> <span class="st">"C"</span><span class="op">,</span> <span class="st">"D"</span><span class="op">,</span> <span class="st">"E"</span><span class="op">});</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>This sets the names for the elements in the NumericVector v. After this, the vector looks like:</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>A  B  C  D  E </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">20</span> <span class="dv">30</span> <span class="dv">40</span> <span class="dv">50</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">/</span> Preparing vector <span class="cf">for</span> access</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  NumericVector numeric <span class="ot">=</span> {<span class="dv">1</span>, <span class="dv">3</span>};</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  IntegerVector integer <span class="ot">=</span> {<span class="dv">1</span>, <span class="dv">3</span>};</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  CharacterVector character <span class="ot">=</span> {<span class="st">"B"</span>, <span class="st">"D"</span>};</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  LogicalVector logical <span class="ot">=</span> {false, true, false, true, false};</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>These vectors (numeric, integer, character, and logical) are created for indexing:</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">/</span> Getting values of vector elements</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  double x1 <span class="ot">=</span> v[<span class="dv">0</span>];             <span class="sc">/</span><span class="er">/</span> Accesses the first <span class="fu">element</span> (<span class="dv">10</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  double x2 <span class="ot">=</span> v[<span class="st">"A"</span>];           <span class="sc">/</span><span class="er">/</span> Accesses the element with name <span class="st">"A"</span> (also <span class="dv">10</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  NumericVector res1 <span class="ot">=</span> v[numeric];    <span class="sc">/</span><span class="er">/</span> Gets elements at indices <span class="dv">2</span> and <span class="dv">4</span> (<span class="dv">20</span>, <span class="dv">40</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  NumericVector res2 <span class="ot">=</span> v[integer];    <span class="sc">/</span><span class="er">/</span> Same as <span class="fu">res1</span> (<span class="dv">20</span>, <span class="dv">40</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  NumericVector res3 <span class="ot">=</span> v[character];  <span class="sc">/</span><span class="er">/</span> Gets elements named <span class="st">"B"</span> and <span class="st">"D"</span> (<span class="dv">20</span>, <span class="dv">40</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  NumericVector res4 <span class="ot">=</span> v[logical];    <span class="sc">/</span><span class="er">/</span> Gets elements at positions <span class="dv">2</span> and <span class="dv">4</span> (<span class="dv">20</span>, <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>v[0]: Accesses the first element using numeric indexing (zero-based indexing in C++).</li>
<li>v[“A”]: Accesses the element with the name “A”, which corresponds to the first element (10).</li>
<li>v[numeric]<strong>,</strong> v[integer]<strong>,</strong> v[character]<strong>,</strong> v[logical]: Accesses multiple elements at once using vectors of different types (numeric, integer, character, logical). All of these access the same elements, 20 and 40, but using different methods of indexing.</li>
</ul>
</blockquote>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>when accessing elements from a container like NumericVector in Rcpp, you typically need to declare the type of the variable that will hold the result first.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">/</span> Assigning values to vector elements</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  v[<span class="dv">0</span>]   <span class="ot">=</span> <span class="dv">100</span>;                 <span class="sc">/</span><span class="er">/</span> Replaces the first element with <span class="dv">100</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  v[<span class="st">"A"</span>] <span class="ot">=</span> <span class="dv">100</span>;                 <span class="sc">/</span><span class="er">/</span> Replaces the element named <span class="st">"A"</span> with <span class="dv">100</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  NumericVector v2 {<span class="dv">100</span>, <span class="dv">200</span>};   <span class="sc">/</span><span class="er">/</span> A new vector {<span class="dv">100</span>, <span class="dv">200</span>}</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  v[numeric]   <span class="ot">=</span> v2;            <span class="sc">/</span><span class="er">/</span> Replaces elements at indices <span class="dv">2</span> and <span class="dv">4</span> with <span class="dv">100</span>, <span class="dv">200</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  v[integer]   <span class="ot">=</span> v2;            <span class="sc">/</span><span class="er">/</span> Same as <span class="fu">above</span> (<span class="dv">2</span>nd and <span class="dv">4</span>th elements)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  v[character] <span class="ot">=</span> v2;            <span class="sc">/</span><span class="er">/</span> Replaces elements named <span class="st">"B"</span> and <span class="st">"D"</span> with <span class="dv">100</span>, <span class="dv">200</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  v[logical]   <span class="ot">=</span> v2;            <span class="sc">/</span><span class="er">/</span> Replaces elements at logical <span class="st">`</span><span class="at">true</span><span class="st">`</span> <span class="fu">positions</span> (<span class="dv">2</span>nd and <span class="dv">4</span>th) with <span class="dv">100</span>, <span class="dv">200</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li><code>v[0] = 100</code>: Changes the first element to 100.</li>
<li><code>v["A"] = 100</code>: Changes the element named “A” (which is the same as the first element) to 100.</li>
<li><code>v[numeric] = v2</code>, <code>v[integer] = v2</code>, <code>v[character] = v2</code>, <code>v[logical] = v2</code>: These lines replace the selected elements (based on various indexing methods) with the values from the new vector v2 ({100, 200}).</li>
</ul>
</blockquote>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>when modifying elements of a vector or container in Rcpp, you must ensure that the new elements are of the same type as the original container.</p>
</div>
</div>
</section>
<section id="methods" class="level3" data-number="1.8.3">
<h3 data-number="1.8.3" class="anchored" data-anchor-id="methods"><span class="header-section-number">1.8.3</span> Methods</h3>
<p>Methods are functions that are attached to an individual object. You can call methods function <code>f()</code> of object <code>v</code> in the form <code>v.f()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="ot">=</span> {<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>};</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Calling member <span class="cf">function</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>int n <span class="ot">=</span> <span class="fu">v.length</span>(); <span class="sc">/</span><span class="er">/</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>vector</code> object in Rcpp has methods functiongs listed below</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>size()</code></td>
<td>Returns the number of elements of this vector object.</td>
</tr>
<tr class="even">
<td><code>names()</code></td>
<td>Returns the element names of this vector object as <code>CharacterVector</code>.</td>
</tr>
<tr class="odd">
<td><code>offset(name)</code>, <code>findName(name)</code></td>
<td>Returns the numerical index of the element specified by the character string <code>name</code>.</td>
</tr>
<tr class="even">
<td><code>offset(i)</code></td>
<td>Returns the numerical index of the element specified by the numerical index <code>i</code> after bounds check.</td>
</tr>
<tr class="odd">
<td><code>fill(x)</code></td>
<td>Fills all the elements of this vector object with scalar value <code>x</code>.</td>
</tr>
<tr class="even">
<td><code>sort()</code></td>
<td>Returns a vector that sorts this vector object in ascending order.</td>
</tr>
<tr class="odd">
<td><code>assign(first_it, last_it)</code></td>
<td>Assigns values specified by the iterator <code>first_it</code> and <code>last_it</code> to this vector object.</td>
</tr>
<tr class="even">
<td><code>push_back(x)</code></td>
<td>Appends a scalar value <code>x</code> to the end of this vector object.</td>
</tr>
<tr class="odd">
<td><code>push_back(x, name)</code></td>
<td>Appends a scalar value <code>x</code> to the end of this vector object and sets the name of the element as <code>name</code>.</td>
</tr>
<tr class="even">
<td><code>push_front(x)</code></td>
<td>Appends a scalar value <code>x</code> to the front of this vector object.</td>
</tr>
<tr class="odd">
<td><code>push_front(x, name)</code></td>
<td>Appends a scalar value <code>x</code> to the front of this vector object and sets the name of the element as <code>name</code>.</td>
</tr>
<tr class="even">
<td><code>begin()</code></td>
<td>Returns an iterator pointing to the first element of this vector object.</td>
</tr>
<tr class="odd">
<td><code>end()</code></td>
<td>Returns an iterator pointing to the end (one past the last element) of this vector object.</td>
</tr>
<tr class="even">
<td><code>cbegin()</code></td>
<td>Returns a const iterator pointing to the first element of this vector.</td>
</tr>
<tr class="odd">
<td><code>cend()</code></td>
<td>Returns a const iterator pointing to the end (one past the last element) of this vector.</td>
</tr>
<tr class="even">
<td><code>insert(i, x)</code></td>
<td>Inserts a scalar value <code>x</code> at the position specified by the numerical index <code>i</code>.</td>
</tr>
<tr class="odd">
<td><code>insert(it, x)</code></td>
<td>Inserts a scalar value <code>x</code> at the position pointed to by the iterator <code>it</code>.</td>
</tr>
<tr class="even">
<td><code>erase(i)</code></td>
<td>Erases the element at the position specified by the numerical index <code>i</code>.</td>
</tr>
<tr class="odd">
<td><code>erase(it)</code></td>
<td>Erases the element at the position pointed to by the iterator <code>it</code>.</td>
</tr>
<tr class="even">
<td><code>erase(first_i, last_i)</code></td>
<td>Erases elements from the position specified by numerical index <code>first_i</code> to <code>last_i</code>.</td>
</tr>
<tr class="odd">
<td><code>erase(first_it, last_it)</code></td>
<td>Erases elements from the position specified by the iterators <code>first_it</code> to <code>last_it</code>.</td>
</tr>
<tr class="even">
<td><code>containsElementNamed(name)</code></td>
<td>Returns <code>true</code> if this vector contains an element with the name specified by the character string <code>name</code>.</td>
</tr>
</tbody>
</table>
</section>
<section id="static-methods" class="level3" data-number="1.8.4">
<h3 data-number="1.8.4" class="anchored" data-anchor-id="static-methods"><span class="header-section-number">1.8.4</span> Static methods</h3>
<p>A <strong>static methods</strong> is a function that belongs to a <strong>class</strong> rather than an instance of the class. This means that you don’t need to create an object (or instance) of the class to call the function; you can call it directly using the class name.</p>
<ul>
<li>Static member functions are called using the class name followed by the ::</li>
<li>Example in Rcpp: NumericVector::create(). Here, create() is a static member function of the class NumericVector, which means you can call it directly using the class name (NumericVector), without creating a NumericVector object first.</li>
</ul>
</section>
</section>
<section id="matrix" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="matrix"><span class="header-section-number">1.9</span> Matrix</h2>
<p><code>Matrix</code> objects can be created in several ways.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Create a Matrix object equivalent to</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>NumericMatrix <span class="fu">m1</span>( <span class="dv">2</span> );</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>NumericMatrix <span class="fu">m2</span>( <span class="dv">2</span> , <span class="dv">3</span> );</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(v, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>NumericMatrix <span class="fu">m3</span>( <span class="dv">2</span> , <span class="dv">3</span> , <span class="fu">v.begin</span>() );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In addition, a matrix object in R is actually a vector that the number of rows and columns are set in the attribute <code>dim</code>.</p>
<p>Thus, if you create a vector with attribute <code>dim</code> in Rcpp and return it to R, it will be treated as a matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="st">'#include &lt;Rcpp.h&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="st">using namespace Rcpp;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="st">// [[Rcpp::export]]</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="st">NumericVector rcpp_matrix(){</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="st">    // Creating a vector object</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="st">    NumericVector v = {1,2,3,4};</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="st">    // Set the number of rows and columns to attribute dim of the vector object.</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="st">    v.attr("dim") = Dimension(2, 2);</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="st">    // Return the vector to R</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="st">    return v;</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="at">code=</span>mat)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rcpp_matrix</span>()</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2]</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]    1    3</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]    2    4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>Even if you set a value to attribute <code>dim</code> of a Vector object, the type of the object remains a <code>Vector</code> type in Rcpp code. Thus, if you want to convert it to <code>Matrix</code> type in Rcpp, you need to use <code>as&lt;T&gt;()</code> function.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Set number of rows and columns to attribute dim</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">v.attr</span>(<span class="st">"dim"</span>) <span class="ot">=</span> <span class="fu">Dimension</span>(<span class="dv">2</span>, <span class="dv">2</span>);</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Converting to Rcpp Matrix type</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>NumericMatrix m <span class="ot">=</span> as<span class="sc">&lt;</span>NumericMatrix<span class="sc">&gt;</span>(v);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="accessing-to-matrix-elements" class="level3" data-number="1.9.1">
<h3 data-number="1.9.1" class="anchored" data-anchor-id="accessing-to-matrix-elements"><span class="header-section-number">1.9.1</span> Accessing to Matrix elements</h3>
<p>By using the <code>()</code> operator, you can get from and assign to the values of elements of a Matrix object by specifying its column number and row number.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Creating a <span class="dv">5</span>x5 numerical matrix</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>NumericMatrix <span class="fu">m</span>( <span class="dv">5</span>, <span class="dv">5</span> );</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Retrieving the element of row <span class="dv">0</span> and column <span class="dv">2</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>double x <span class="ot">=</span> <span class="fu">m</span>( <span class="dv">0</span> , <span class="dv">2</span> );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>This line retrieves the element at <strong>row 0</strong>, <strong>column 2</strong> of the matrix m and stores it in the variable x.</li>
<li>The <strong>parentheses</strong> m(0, 2) are used for <strong>element access</strong> in the matrix, similar to m[0, 2] in R.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="ot">=</span> <span class="fu">m</span>( <span class="dv">0</span> , _ );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>This line copies all the values in <strong>row 0</strong> (i.e., the entire first row) of the matrix m into the vector v.</li>
<li>The underscore _ is a placeholder that represents “all elements” in the corresponding dimension.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>NumericVector v <span class="ot">=</span> <span class="fu">m</span>( _ , <span class="dv">2</span> );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>This line copies all the values in <strong>column 2</strong> (i.e., the third column) of the matrix m into the vector v.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>NumericMatrix m2 <span class="ot">=</span> <span class="fu">m</span>( <span class="fu">Range</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="fu">Range</span>(<span class="dv">2</span>,<span class="dv">3</span>) );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>This line copies a submatrix of m consisting of the values in <strong>rows 0 and 1</strong> (first and second rows) and <strong>columns 2 and 3</strong> (third and fourth columns) into a new matrix m2. <code>Range(0,1)</code> specifies that rows 0 and 1 should be selected, and <code>Range(2,3)</code> specifies that columns 2 and 3 should be selected.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">5</span>]; <span class="sc">/</span><span class="er">/</span> This points to the same element as <span class="fu">m</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>This line demonstrates <strong>linear indexing</strong> into the matrix. While NumericMatrix is a two-dimensional structure, it can also be treated like a <strong>1D</strong> array when accessed with square brackets <code>[]</code>.</p>
</blockquote>
</section>
<section id="accessing-as-reference-to-row-column-and-sub-matrix" class="level3" data-number="1.9.2">
<h3 data-number="1.9.2" class="anchored" data-anchor-id="accessing-as-reference-to-row-column-and-sub-matrix"><span class="header-section-number">1.9.2</span> Accessing as reference to row, column and sub matrix</h3>
<p>Rcpp also provides types that hold “references” to specific parts of a matrix.</p>
<ol type="1">
<li>Referencing a Column:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>NumericMatrix<span class="sc">::</span>Column col <span class="ot">=</span> <span class="fu">m</span>( _ , <span class="dv">1</span> );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>m(_, 1): This accesses column 1 of the matrix m (zero-based indexing, so it refers to the second column).</li>
<li>NumericMatrix::Column: This type is a reference to a specific column of the matrix. It doesn’t create a copy of the column but rather provides direct access to the elements in column 1.</li>
</ul>
</blockquote>
<ol start="2" type="1">
<li>Referencing a Row:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>NumericMatrix<span class="sc">::</span>Row row <span class="ot">=</span> <span class="fu">m</span>( <span class="dv">1</span> , _ );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li><code>m(1,_)</code>: Thisaccesses <strong>row 1</strong> of the matrix m</li>
<li><code>NumericMatrix::Row</code>: This type is a reference to a specific row of the matrix.</li>
</ul>
</blockquote>
<ol start="3" type="1">
<li>Referencing a Submatrix</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>NumericMatrix<span class="sc">::</span>Sub sub <span class="ot">=</span> <span class="fu">m</span>( <span class="fu">Range</span>(<span class="dv">0</span>,<span class="dv">1</span>) , <span class="fu">Range</span>(<span class="dv">2</span>,<span class="dv">3</span>) );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li><code>Range(0,1)</code>: This specifies the range of rows to select (rows 0 and 1, the first two rows).</li>
<li><code>Range(2,3)</code>: This specifies the range of columns to select (columns 2 and 3, the third and fourth columns).</li>
<li><code>NumericMatrix::Sub</code>: This type is a reference to a submatrix of m. It references the elements in the submatrix defined by the row and column ranges.</li>
</ul>
</blockquote>
</section>
<section id="methods-1" class="level3" data-number="1.9.3">
<h3 data-number="1.9.3" class="anchored" data-anchor-id="methods-1"><span class="header-section-number">1.9.3</span> Methods</h3>
<p>Since Matrix is actually <code>Vector</code>, Matrix basically has the same member functions as <code>Vector</code>. Thus, member functions unique to <code>Matrix</code> are only presented below.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>nrow()</code> or <code>rows()</code></td>
<td>Returns the number of rows.</td>
</tr>
<tr class="even">
<td><code>ncol()</code> or <code>cols()</code></td>
<td>Returns the number of columns.</td>
</tr>
<tr class="odd">
<td><code>row(i)</code></td>
<td>Returns a reference <code>Vector::Row</code> to the <code>i</code>-th row.</td>
</tr>
<tr class="even">
<td><code>column(i)</code></td>
<td>Returns a reference <code>Vector::Column</code> to the <code>i</code>-th column.</td>
</tr>
<tr class="odd">
<td><code>fill_diag(x)</code></td>
<td>Fills the diagonal elements with the scalar value <code>x</code>.</td>
</tr>
<tr class="even">
<td><code>offset(i, j)</code></td>
<td>Returns the numerical index in the original vector of the matrix corresponding to the element at row <code>i</code> and column <code>j</code>.</td>
</tr>
</tbody>
</table>
</section>
<section id="static-menmber-functions" class="level3" data-number="1.9.4">
<h3 data-number="1.9.4" class="anchored" data-anchor-id="static-menmber-functions"><span class="header-section-number">1.9.4</span> Static menmber functions</h3>
<p>Matrix basically has the same static member function as Vector. The static member functions unique to Matrix are shown below. <code>Matrix::diag( size, x )</code>: Returns a diagonal matrix whose number of rows and columns equals to “size” and the value of the diagonal element is “x”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cppFunction</span>(<span class="st">"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="st">NumericMatrix create_diag_matrix(int size, double x) {</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="st">    // Create a diagonal matrix of the given size with x on the diagonal</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="st">    NumericMatrix mat = NumericMatrix::diag(size, x);</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="st">    return mat;</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="st">}"</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">create_diag_matrix</span>(<span class="dv">5</span>,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>x</code> is a scalar value that will be placed along the diagonal of the matrix.</p>
</div>
</div>
</section>
<section id="other-functions-related-to-matrix" class="level3" data-number="1.9.5">
<h3 data-number="1.9.5" class="anchored" data-anchor-id="other-functions-related-to-matrix"><span class="header-section-number">1.9.5</span> Other functions related to Matrix</h3>
<ol type="1">
<li>rownames</li>
</ol>
<ul>
<li>get the row name of matrix <code>m</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>CharacterVector ch <span class="ot">=</span> <span class="fu">rownames</span>(m);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>set the row name of matrix <code>m</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m) <span class="ot">=</span> ch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>colnames</li>
</ol>
<ul>
<li>get the column name of matrix <code>m</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>CharacterVector ch <span class="ot">=</span> <span class="fu">colnames</span>(m);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>set the column name of matrix <code>m</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m) <span class="ot">=</span> ch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>transpose return the transposed matrix of matirx <code>m</code>:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transpose</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="vector-operations" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="vector-operations"><span class="header-section-number">1.10</span> Vector operations</h2>
<section id="arithmetic-operations" class="level3" data-number="1.10.1">
<h3 data-number="1.10.1" class="anchored" data-anchor-id="arithmetic-operations"><span class="header-section-number">1.10.1</span> Arithmetic operations</h3>
<p>By using the <code>+</code> <code>-</code> <code>*</code> <code>/</code> operator you can perform elementwise arithmetic operations between vectors of the same length.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>NumericVector x ;</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>NumericVector y ;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vector and vector operation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Vector and vector operation</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">+</span> y ;</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">-</span> y ;</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">*</span> y ;</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">/</span> y ;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vector and scalar operation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Vector and scalar operation</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x   <span class="sc">+</span> <span class="fl">2.0</span> ;</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> <span class="fl">2.0</span> <span class="sc">-</span> x;</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> y   <span class="sc">*</span> <span class="fl">2.0</span> ;</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> <span class="fl">2.0</span> <span class="sc">/</span> y;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Expression and expression operation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">*</span> y <span class="sc">+</span> y <span class="sc">/</span> <span class="fl">2.0</span> ;</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">*</span> ( y <span class="sc">-</span> <span class="fl">2.0</span> ) ;</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x <span class="sc">/</span> ( y <span class="sc">*</span> y ) ;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>-</code> operator inverts the sign.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> <span class="sc">-</span>x ;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="comparison-operations" class="level3" data-number="1.10.2">
<h3 data-number="1.10.2" class="anchored" data-anchor-id="comparison-operations"><span class="header-section-number">1.10.2</span> Comparison operations</h3>
<p>Comparison of vectors using <code>==</code> <code>!</code> <code>=</code> <code>&lt;</code> <code>&gt;</code> <code>&gt;=</code> <code>&lt;=</code> operators produces <strong>logical vectors</strong>. You can also access vector elements using logical vectors.</p>
<p>Comparison of vector and vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">&lt;</span> y ;</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">&gt;</span> y ;</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">&lt;=</span> y ;</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">&gt;=</span> y ;</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">==</span> y ;</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">!=</span> y ;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Comparison of vector and scalar</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> x <span class="sc">&lt;</span> <span class="dv">2</span> ;</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> <span class="dv">2</span> <span class="sc">&gt;</span> x;</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> y <span class="sc">&lt;=</span> <span class="dv">2</span> ;</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> <span class="dv">2</span> <span class="sc">!=</span> y;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Comparison of expression and expression</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> ( x <span class="sc">+</span> y ) <span class="sc">&lt;</span> ( x<span class="sc">*</span>x ) ;</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> ( x <span class="sc">+</span> y ) <span class="sc">&gt;=</span> ( x<span class="sc">*</span>x ) ;</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> ( x <span class="sc">+</span> y ) <span class="sc">==</span> ( x<span class="sc">*</span>x ) ;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>!(...)</code>: The logical NOT operator <code>!</code> negates the result of the comparison. In other words, it turns TRUE into FALSE and FALSE into TRUE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>LogicalVector res <span class="ot">=</span> <span class="sc">!</span>(x <span class="sc">&lt;</span> y);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Accessing the elements of the vector using logical vectors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>NumericVector res <span class="ot">=</span> x[x <span class="sc">&lt;</span> <span class="dv">2</span>];</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="logical-operations" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="logical-operations"><span class="header-section-number">1.11</span> Logical operations</h2>
<section id="logical-vector" class="level3" data-number="1.11.1">
<h3 data-number="1.11.1" class="anchored" data-anchor-id="logical-vector"><span class="header-section-number">1.11.1</span> Logical Vector</h3>
<p>Although in C++ the <strong>boolean type</strong> (bool) has only two possible values, <code>true (1)</code> and <code>false (0)</code>, R’s logical vectors have a third possible value: <code>NA</code> (missing or undefined). Because C++ bool can’t represent this third state, Rcpp <strong>uses integers to represent the elements of R’s LogicalVector</strong>.</p>
<p>In Rcpp, elements of a <strong>LogicalVector</strong> are stored as integers to accommodate the extra <code>NA</code> value. Specifically, these values are represented as: + TRUE: 1 (same as C++ true) + FALSE: 0 (same as C++ false) + NA: NA_LOGICAL, which is a special constant defined as the minimum value of an integer: -2147483648 (the smallest value for a 32-bit signed integer).</p>
</section>
<section id="logical-operations-1" class="level3" data-number="1.11.2">
<h3 data-number="1.11.2" class="anchored" data-anchor-id="logical-operations-1"><span class="header-section-number">1.11.2</span> Logical operations</h3>
<p>Use the operator <code>&amp;</code> (logical product) <code>|</code> (logical sum) <code>!</code> (Logical negation) for the logical operation for each element of LogicalVector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>LogicalVector v1 <span class="ot">=</span> {<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>};</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>LogicalVector v2 <span class="ot">=</span> {<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>};</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>LogicalVector res1 <span class="ot">=</span> v1 <span class="sc">&amp;</span> v2;</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>LogicalVector res2 <span class="ot">=</span> v1 <span class="sc">|</span> v2;</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>LogicalVector res3 <span class="ot">=</span> <span class="sc">!</span>(v1 <span class="sc">|</span> v2);</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> res1 <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>; <span class="sc">/</span><span class="er">/</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> res2 <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>; <span class="sc">/</span><span class="er">/</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> res3 <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>; <span class="sc">/</span><span class="er">/</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="function-that-receives-logicalvector" class="level3" data-number="1.11.3">
<h3 data-number="1.11.3" class="anchored" data-anchor-id="function-that-receives-logicalvector"><span class="header-section-number">1.11.3</span> Function that receives LogicalVector</h3>
<section id="all-and-any" class="level4" data-number="1.11.3.1">
<h4 data-number="1.11.3.1" class="anchored" data-anchor-id="all-and-any"><span class="header-section-number">1.11.3.1</span> <code>all()</code> and <code>any()</code></h4>
<p>Examples of functions that receive LogicalVector are <code>all()</code>, <code>any()</code> and <code>ifelse()</code>.</p>
<ul>
<li><code>all(v)</code> returns <code>TRUE</code> when all elements of <code>v</code> are <code>TRUE</code>, and <code>any(v)</code> returns <code>TRUE</code> if any of <code>v</code>’s elements are <code>TRUE</code>.</li>
</ul>
<p>In Rcpp, the return type of both all() and any() is not a simple bool, but a more complex type called <code>SingleLogicalResult</code>.</p>
<p>This type can represent not only <code>TRUE</code> or <code>FALSE</code>, but also <code>NA</code> (the third possible logical value in R). As a result, the return value of <code>all()</code> or <code>any()</code> cannot be directly used in a conditional statement like an <code>if</code> statement in C++.</p>
<p>To convert the <code>SingleLogicalResult</code> from <code>all()</code> or <code>any()</code> into a bool, Rcpp provides helper functions: + is_true(): Returns true if the result is TRUE. + is_false(): Returns true if the result is FALSE. + is_na(): Returns true if the result is NA.</p>
</section>
<section id="ifelse" class="level4" data-number="1.11.3.2">
<h4 data-number="1.11.3.2" class="anchored" data-anchor-id="ifelse"><span class="header-section-number">1.11.3.2</span> <code>ifelse()</code></h4>
<p><code>ifelse (v, x1, x2)</code> receives the logical vector <code>v</code>, and returns the corresponding element of <code>x1</code> when the element of <code>v</code> is <code>TRUE</code> and the corresponding element of <code>x2</code> when it is <code>FALSE</code>.</p>
<blockquote class="blockquote">
<p><code>x1</code> and <code>x2</code> must either be <code>scalars</code> or <code>vectors</code>. If they are vectors, their length must match the <strong>length of v</strong>. This ensures that there is a corresponding element in <code>x1</code> or <code>x2</code> for each element in <code>v</code>.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>NumericVector v1;</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>NumericVector v2;</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span>Number of elements of vector</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>int n <span class="ot">=</span> <span class="fu">v1.length</span>();</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In case, both x1 and x2 are scalar</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>IntegerVector res1     <span class="ot">=</span> <span class="fu">ifelse</span>( v1<span class="sc">&gt;</span>v2, <span class="dv">1</span>, <span class="dv">0</span>);</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>NumericVector res2     <span class="ot">=</span> <span class="fu">ifelse</span>( v1<span class="sc">&gt;</span>v2, <span class="fl">1.0</span>, <span class="fl">0.0</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Since <code>ifelse()</code> does not work with a scalar <code>character string</code>, we need to use a string vector whose values of elements are all the same.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>CharacterVector chr_v1 <span class="ot">=</span> <span class="fu">rep</span>(<span class="fu">CharacterVector</span>(<span class="st">"T"</span>), n);</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>CharacterVector chr_v2 <span class="ot">=</span> <span class="fu">rep</span>(<span class="fu">CharacterVector</span>(<span class="st">"F"</span>), n);</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>CharacterVector res3   <span class="ot">=</span> <span class="fu">ifelse</span>( v1<span class="sc">&gt;</span>v2, chr_v1, chr_v2);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In case, <code>x1</code> and <code>x2</code> are <code>vector</code> and <code>scalar</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>IntegerVector res4 <span class="ot">=</span> <span class="fu">ifelse</span>(v1 <span class="sc">&gt;</span> v2, int_v1, <span class="dv">0</span>);</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>NumericVector res5 <span class="ot">=</span> <span class="fu">ifelse</span>(v1 <span class="sc">&gt;</span> v2, num_v1, <span class="fl">0.0</span>);</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>CharacterVector res6 <span class="ot">=</span> <span class="fu">ifelse</span>(v1 <span class="sc">&gt;</span> v2, chr_v1, <span class="fu">Rf_mkChar</span>(<span class="st">"F"</span>)); <span class="sc">/</span><span class="er">/</span> Note</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>For <code>integer</code> and <code>numeric</code> vectors, the <code>scalar</code> values (0 and 0.0) are recycled as needed</li>
<li>For <code>character</code> vectors, you cannot directly use a scalar string like <code>"F"</code>; instead, you use <code>Rf_mkChar("F")</code>, which creates an internal SEXP (R object) representing the string “F”.</li>
</ul>
</blockquote>
</section>
</section>
</section>
<section id="data-frame" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="data-frame"><span class="header-section-number">1.12</span> Data frame</h2>
<section id="creating-dataframe" class="level3" data-number="1.12.1">
<h3 data-number="1.12.1" class="anchored" data-anchor-id="creating-dataframe"><span class="header-section-number">1.12.1</span> Creating DataFrame</h3>
<p>In Rcpp, <code>DataFrame</code> is implemented as a kind of vector. In other words, <code>Vector</code> is a vector whose element is <strong>scalar</strong> value, while <code>DataFrame</code> is a vector whose elements are Vectors of the same length.</p>
<p><code>DataFrame::create()</code> is used to create a DataFrame object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Creating DataFrame df from Vector v1, v2</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>DataFrame df <span class="ot">=</span> DataFrame<span class="sc">::</span><span class="fu">create</span>(v1, v2);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Also, use <code>Named()</code> or <code>_[]</code> if you want to specify column names when creating DataFrame　object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> When giving names to columns</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>DataFrame df <span class="ot">=</span> DataFrame<span class="sc">::</span><span class="fu">create</span>( <span class="fu">Named</span>(<span class="st">"V1"</span>) <span class="ot">=</span> v1 , _[<span class="st">"V2"</span>] <span class="ot">=</span> v2 );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you create a DataFrame with <code>DataFrame::create()</code>, the value of the originalVector element will <strong>not be duplicated</strong> in the columns of the DataFrame, but the columns will be the <strong>“reference”</strong> to the original Vector. Therefore, changing the value of the original Vector changes the value of the columns. To avoid this, use <code>clone()</code>.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="st">'#include &lt;Rcpp.h&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="st">using namespace Rcpp;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="st">// [[Rcpp::export]]</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="st">DataFrame rcpp_df(){</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="st">  // Creating vector v</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="st">  NumericVector v = {1,2};</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="st">  // Creating DataFrame df</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="st">  DataFrame df = DataFrame::create( Named("V1") = v,         // simple assign</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="st">                                    Named("V2") = clone(v)); // using clone()</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="st">  // Changing vector v</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="st">  v = v * 2;</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="st">  return df;</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="at">code=</span>df)</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rcpp_df</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-dataframe-elements" class="level3" data-number="1.12.2">
<h3 data-number="1.12.2" class="anchored" data-anchor-id="accessing-dataframe-elements"><span class="header-section-number">1.12.2</span> Accessing DataFrame elements</h3>
<p>When you access a specific column of a DataFrame in Rcpp, that column is temporarily assigned to a <code>Vector</code> object. The Vector object allows you to manipulate or access the values of that column as if it were a separate vector.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>As with DataFrame creation, assigning aDataFrame column to Vector in the above way will not copy the column value to Vector object, but it will be a “reference” to the column. Therefore, when you change the values of Vector object, the content of the column will also be changed.</p>
</div>
</div>
<section id="accessing-by-numeric-string-or-logical-vectors" class="level4" data-number="1.12.2.1">
<h4 data-number="1.12.2.1" class="anchored" data-anchor-id="accessing-by-numeric-string-or-logical-vectors"><span class="header-section-number">1.12.2.1</span> Accessing by Numeric, String, or Logical Vectors</h4>
<p>You can specify which column of the <code>DataFrame</code> you want to access using different types of vectors:</p>
<ul>
<li><p><code>Numeric Vector</code> (Column Number):You can specify a column by its index (0-based). Example: df[0] would return the first column.</p></li>
<li><p><code>String Vector</code> (Column Name):You can access a column by its name using a string, which is more intuitive and readable when dealing with named columns.</p></li>
<li><p>Logical Vector: Each element of the logical vector corresponds to whether a column should be included (<code>TRUE</code>) or excluded (<code>FALSE</code>). The length of the logical vector must <strong>match the number of columns</strong> in the data frame.</p></li>
</ul>
</section>
</section>
<section id="member-functions" class="level3" data-number="1.12.3">
<h3 data-number="1.12.3" class="anchored" data-anchor-id="member-functions"><span class="header-section-number">1.12.3</span> Member functions</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>nrows()</code></td>
<td>Returns the number of rows.</td>
</tr>
<tr class="even">
<td><code>ncol()</code></td>
<td>Returns the number of columns.</td>
</tr>
<tr class="odd">
<td><code>length()</code></td>
<td>Returns the number of columns.</td>
</tr>
<tr class="even">
<td><code>size()</code></td>
<td>Returns the number of columns.</td>
</tr>
<tr class="odd">
<td><code>names()</code></td>
<td>Returns the column names as a <code>CharacterVector</code>.</td>
</tr>
<tr class="even">
<td><code>offset(name)</code> or <code>findName(name)</code></td>
<td>Returns the numerical index of the column with the name specified by the string <code>name</code>.</td>
</tr>
<tr class="odd">
<td><code>fill(v)</code></td>
<td>Fills all the columns of this <code>DataFrame</code> with the <code>Vector</code> <code>v</code>.</td>
</tr>
<tr class="even">
<td><code>assign(first_it, last_it)</code></td>
<td>Assigns columns in the range specified by the iterators <code>first_it</code> and <code>last_it</code> to this <code>DataFrame</code>.</td>
</tr>
<tr class="odd">
<td><code>push_back(v)</code></td>
<td>Adds <code>Vector v</code> to the end of the <code>DataFrame</code>.</td>
</tr>
<tr class="even">
<td><code>push_back(v, name)</code></td>
<td>Appends a <code>Vector v</code> to the end of the <code>DataFrame</code> and specifies the name of the added column with the string <code>name</code>.</td>
</tr>
<tr class="odd">
<td><code>push_front(x)</code></td>
<td>Appends a <code>Vector v</code> at the beginning of this <code>DataFrame</code>.</td>
</tr>
<tr class="even">
<td><code>push_front(x, name)</code></td>
<td>Appends a <code>Vector v</code> at the beginning of this <code>DataFrame</code> and specifies the name of the added column with the string <code>name</code>.</td>
</tr>
<tr class="odd">
<td><code>begin()</code></td>
<td>Returns an iterator pointing to the first column of this <code>DataFrame</code>.</td>
</tr>
<tr class="even">
<td><code>end()</code></td>
<td>Returns an iterator pointing to the end of this <code>DataFrame</code>.</td>
</tr>
<tr class="odd">
<td><code>insert(it, v)</code></td>
<td>Adds <code>Vector v</code> to this <code>DataFrame</code> at the position pointed by the iterator <code>it</code> and returns an iterator to that element.</td>
</tr>
<tr class="even">
<td><code>erase(i)</code></td>
<td>Deletes the <code>i</code>-th column of this <code>DataFrame</code> and returns an iterator to the column just after the erased column.</td>
</tr>
<tr class="odd">
<td><code>erase(it)</code></td>
<td>Deletes the column specified by the iterator <code>it</code> and returns an iterator to the column just after the erased column.</td>
</tr>
<tr class="even">
<td><code>erase(first_i, last_i)</code></td>
<td>Deletes columns from <code>first_i</code> to <code>last_i - 1</code> and returns an iterator to the column just after the erased columns.</td>
</tr>
<tr class="odd">
<td><code>erase(first_it, last_it)</code></td>
<td>Deletes the range of columns specified by the iterators <code>first_it</code> to <code>last_it - 1</code> and returns an iterator to the column just after the erased columns.</td>
</tr>
<tr class="even">
<td><code>containsElementNamed(name)</code></td>
<td>Returns <code>true</code> if this <code>DataFrame</code> has a column with the name specified by the string <code>name</code>.</td>
</tr>
<tr class="odd">
<td><code>inherits(str)</code></td>
<td>Returns <code>true</code> if the attribute “class” of this object contains the string <code>str</code>.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="list" class="level2" data-number="1.13">
<h2 data-number="1.13" class="anchored" data-anchor-id="list"><span class="header-section-number">1.13</span> List</h2>
<p>In Rcpp, <code>List</code> is implemented as a kind of <code>vector</code>. In other words, Vector is a vector whose element is scalar value, while <strong>List is a vector whose elements are any kinds of data types</strong>.</p>
<section id="creating-list-object" class="level3" data-number="1.13.1">
<h3 data-number="1.13.1" class="anchored" data-anchor-id="creating-list-object"><span class="header-section-number">1.13.1</span> Creating List object</h3>
<p>To create a List object we use the <code>List::create()</code> function. Also, to specify the element name when creating List, use <code>Named()</code> function or <code>_[]</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Create list L from vector v1, v2</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>List L <span class="ot">=</span> List<span class="sc">::</span><span class="fu">create</span>(v1, v2);</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> When giving names to elements</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>List L <span class="ot">=</span> List<span class="sc">::</span><span class="fu">create</span>(<span class="fu">Named</span>(<span class="st">"name1"</span>) <span class="ot">=</span> v1 , _[<span class="st">"name2"</span>] <span class="ot">=</span> v2);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you create a <code>List</code> with <code>DataFrame::create()</code>, the value of the originalVector element will <strong>not be duplicated</strong> but the elements will be the <strong>“reference”</strong> to the original Vector. Therefore, changing the value of the original Vector changes the value of the list. To avoid this, use <code>clone()</code>.</p>
</div>
</div>
</section>
<section id="accessing-list-elements" class="level3" data-number="1.13.2">
<h3 data-number="1.13.2" class="anchored" data-anchor-id="accessing-list-elements"><span class="header-section-number">1.13.2</span> Accessing List elements</h3>
<p>When accessing a specific element of List, we <strong>assign</strong> it to the other object and <strong>access it via that object</strong>.</p>
<p>The elements of List can be specified by numerical index, element names and logical vector.</p>
</section>
<section id="member-functions-1" class="level3" data-number="1.13.3">
<h3 data-number="1.13.3" class="anchored" data-anchor-id="member-functions-1"><span class="header-section-number">1.13.3</span> Member functions</h3>
<p><code>List</code> has the same member functions as <code>Vector</code></p>
</section>
</section>
<section id="s3s4-class" class="level2" data-number="1.14">
<h2 data-number="1.14" class="anchored" data-anchor-id="s3s4-class"><span class="header-section-number">1.14</span> <code>S3``S4</code> class</h2>
<p>The <code>S3</code> class is actually a list whose attribute class has its own value.</p>
<p>We use an example to demonstrate how to use it in Rcpp</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>double <span class="fu">rcpp_rmse</span>(List lm_model) {</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Since S3 is a list, data type of the argument is specified as List.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>S3 objects</strong> in R, such as objects created by <code>lm()</code>, are typically lists with an additional <code>class attribute</code>. Since an S3 object is fundamentally a list, in Rcpp, we can use the List data type to receive it.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span> <span class="fu">lm_model.inherits</span>(<span class="st">"lm"</span>)) <span class="fu">stop</span>(<span class="st">"Input must be a lm() model object."</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>The <code>inherits("lm")</code> function checks whether the input object (the list) belongs to the <code>lm</code> class. This ensures that the input object is an lm object.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Extracting <span class="fu">residuals</span> (i.e. actual <span class="sc">-</span> prediction) from the S3 object</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    NumericVector resid  <span class="ot">=</span> lm_model[<span class="st">"residuals"</span>];</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>In an <code>lm</code> object, residuals are stored in the “residuals” component.</li>
<li>Since the S3 object is a <code>list</code>, we can access the “residuals” component using list-like indexing (lm_model[“residuals”]), which extracts the residuals as a NumericVector in Rcpp.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Number of elements of the residual vector</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    R_xlen_t n <span class="ot">=</span> <span class="fu">resid.length</span>();</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>The <code>length()</code> function is used to get the number of elements in the resid vector (i.e., the number of residuals).</li>
<li><code>R_xlen_t</code> is a type that represents the length of vectors in R. It is typically used in Rcpp when dealing with vector lengths.</li>
</ul>
</blockquote>
<div class="callout-tips">
<p><code>R_xlen_t</code> is large enough to handle <strong>very long vectors</strong>, which is crucial when you’re working with vectors whose length might <strong>exceed the range of a standard integer</strong> (which is 2^31 - 1 in R, roughly 2 billion).</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> The sum of squares of the residual vector</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    double <span class="fu">rmse</span>(<span class="fl">0.0</span>);</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(double<span class="sc">&amp;</span> r <span class="sc">:</span> resid){</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>        rmse <span class="sc">+</span><span class="er">=</span> r<span class="sc">*</span>r;</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Divide the residual sum of squares by the number of elements and take the square root</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">sqrt</span>((<span class="fl">1.0</span><span class="sc">/</span>n)<span class="sc">*</span>rmse));</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="s4-class" class="level3" data-number="1.14.1">
<h3 data-number="1.14.1" class="anchored" data-anchor-id="s4-class"><span class="header-section-number">1.14.1</span> <code>S4</code> class</h3>
<p>wait to update.</p>
</section>
</section>
<section id="string" class="level2" data-number="1.15">
<h2 data-number="1.15" class="anchored" data-anchor-id="string"><span class="header-section-number">1.15</span> String</h2>
<p><code>String</code> is a scalar type corresponding to the element of <code>CharacterVector</code>. String can also handle <code>NA</code> values (<code>NA_STRING</code>) which are not supported by the C character string <code>char*</code> and the C++ string <code>std::string</code>.</p>
<section id="creating-string-object" class="level3" data-number="1.15.1">
<h3 data-number="1.15.1" class="anchored" data-anchor-id="creating-string-object"><span class="header-section-number">1.15.1</span> Creating String object</h3>
<p>There are three main ways to create a String object. Each approach reflects different sources for creating the String object:</p>
<ol type="1">
<li>Creating a String from a <code>C/C++ String</code> (<code>Character Pointer</code> or <code>std::string</code>):</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Create String from C<span class="sc">-</span>style string</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>String s1 <span class="ot">=</span> <span class="st">"Hello, world!"</span>;</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Create String from std<span class="sc">::</span>string</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>std<span class="sc">::</span>string cpp_str <span class="ot">=</span> <span class="st">"C++ string"</span>;</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>String s2 <span class="ot">=</span> cpp_str;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>s1 is created from a <strong>C-style</strong> string (<code>"Hello, world!"</code>).</li>
<li>s2 is created from a <strong>C++</strong> string (<code>std::string</code>).</li>
</ul>
</blockquote>
<ol start="2" type="1">
<li>Creating a String from Another String Object:</li>
</ol>
<ul>
<li>You can create a new String object by copying an existing String object in Rcpp.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>String s1 <span class="ot">=</span> <span class="st">"Original string"</span>;</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Create a new String from another String object</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>String s2 <span class="ot">=</span> s1;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Creating a String from an Element of a <code>CharacterVector</code>:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>CharacterVector cv <span class="ot">=</span> CharacterVector<span class="sc">::</span><span class="fu">create</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>);</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Create a String from the second element of the CharacterVector</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>String s <span class="ot">=</span> cv[<span class="dv">1</span>];  <span class="sc">/</span><span class="er">/</span> Note<span class="sc">:</span> <span class="dv">0</span><span class="sc">-</span>based indexing, so this accesses <span class="st">"two"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operators" class="level3" data-number="1.15.2">
<h3 data-number="1.15.2" class="anchored" data-anchor-id="operators"><span class="header-section-number">1.15.2</span> Operators</h3>
<p>In Rcpp, the String class supports the <code>+=</code> operator, which allows you to <strong>append</strong> another string (or string-like object) to an existing String object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Creating String object</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>String <span class="fu">s</span>(<span class="st">"A"</span>);</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> Conbining a string</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>s <span class="sc">+</span><span class="er">=</span> <span class="st">"B"</span>;</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> s <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>; </span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> <span class="st">"AB"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="member-functions-2" class="level3" data-number="1.15.3">
<h3 data-number="1.15.3" class="anchored" data-anchor-id="member-functions-2"><span class="header-section-number">1.15.3</span> Member functions</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 72%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>replace_first(str, new_str)</code></td>
<td>Replace the first substring that matches the string <code>str</code> with the string <code>new_str</code>.</td>
</tr>
<tr class="even">
<td><code>replace_last(str, new_str)</code></td>
<td>Replace the last substring that matches the string <code>str</code> with the string <code>new_str</code>.</td>
</tr>
<tr class="odd">
<td><code>replace_all(str, new_str)</code></td>
<td>Replace all substrings that match the string <code>str</code> with the string <code>new_str</code>.</td>
</tr>
<tr class="even">
<td><code>push_back(str)</code></td>
<td>Combine the string <code>str</code> to the end of this <code>String</code> object. (Same as <code>+=</code> operator)</td>
</tr>
<tr class="odd">
<td><code>push_front(str)</code></td>
<td>Combine the string <code>str</code> at the beginning of this <code>String</code> object.</td>
</tr>
<tr class="even">
<td><code>set_na()</code></td>
<td>Set NA value to this <code>String</code> object.</td>
</tr>
<tr class="odd">
<td><code>get_cstring()</code></td>
<td>Convert the string of this <code>String</code> object into a C character string constant (<code>const char*</code>) and return it.</td>
</tr>
<tr class="even">
<td><code>get_encoding()</code></td>
<td>Returns the character encoding. The encoding is represented by <code>cettype_t</code>.</td>
</tr>
<tr class="odd">
<td><code>set_encoding(enc)</code></td>
<td>Set the character encoding specified by <code>cettype_t</code>.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="date-and-datevector" class="level2" data-number="1.16">
<h2 data-number="1.16" class="anchored" data-anchor-id="date-and-datevector"><span class="header-section-number">1.16</span> Date and DateVector</h2>
<section id="creating-date-objects" class="level3" data-number="1.16.1">
<h3 data-number="1.16.1" class="anchored" data-anchor-id="creating-date-objects"><span class="header-section-number">1.16.1</span> Creating Date objects</h3>
<p>The following codes illustrates different ways to create a Date object in Rcpp, representing a specific date.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>Date d;  <span class="sc">/</span><span class="er">/</span> <span class="st">"1970-01-01"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li><code>Date d</code>; creates a Date object d that represents the epoch date “1970-01-01”, which is considered the default starting point for dates in many computing systems, including R.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>Date <span class="fu">d</span>(<span class="dv">1</span>);  <span class="sc">/</span><span class="er">/</span> <span class="st">"1970-01-01"</span> <span class="sc">+</span> <span class="dv">1</span> day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li><code>Date d(1)</code>; creates a Date object d that represents one day after the epoch date.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>Date <span class="fu">d</span>(<span class="fl">1.1</span>);  <span class="sc">/</span><span class="er">/</span> <span class="st">"1970-01-01"</span> <span class="sc">+</span> <span class="fu">ceil</span>(<span class="fl">1.1</span>) day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li><code>Date d(1.1)</code>; creates a Date object <code>d</code> that represents 1.1 days after “1970-01-01”. The number is rounded up (<code>using ceil()</code>), so it is treated as 2 days after “1970-01-01”.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>Date <span class="fu">d</span>(<span class="st">"2000-01-01"</span>, <span class="st">"%Y-%m-%d"</span>);  <span class="sc">/</span><span class="er">/</span> Date specified by a string with a format</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>This creates a Date object <code>d</code> from a string <code>"2000-01-01"</code> with the format <code>"%Y-%m-%d"</code></p>
</blockquote>
<p>Date from <code>Day</code>, <code>Month</code>, and <code>Year</code> <code>(mm/dd/yyyy)</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>Date <span class="fu">d</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2000</span>);  <span class="sc">/</span><span class="er">/</span> <span class="dv">2000-01-02</span> (mon, day, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operators-1" class="level3" data-number="1.16.2">
<h3 data-number="1.16.2" class="anchored" data-anchor-id="operators-1"><span class="header-section-number">1.16.2</span> Operators</h3>
<p><code>Date</code> has operators <code>+</code>, <code>-</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code>.</p>
<p>By using these operators, you can perform addition of days (<code>+</code>), difference calculation of date (<code>-</code>), and comparison of dates (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>) . ### Member functions</p>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>format()</code></td>
<td>Returns the date as a <code>std::string</code> using the same specification as base R. The default format is <code>YYYY-MM-DD</code>.</td>
</tr>
<tr class="even">
<td><code>getDay()</code></td>
<td>Returns the day of the date.</td>
</tr>
<tr class="odd">
<td><code>getMonth()</code></td>
<td>Returns the month of the date.</td>
</tr>
<tr class="even">
<td><code>getYear()</code></td>
<td>Returns the year of the date.</td>
</tr>
<tr class="odd">
<td><code>getWeekday()</code></td>
<td>Returns the day of the week as an int. (<code>1:Sun</code>, <code>2:Mon</code>, <code>3:Tue</code>, <code>4:Wed</code>, <code>5:Thu</code>, <code>6:Sat</code>).</td>
</tr>
<tr class="even">
<td><code>getYearday()</code></td>
<td>Returns the number of the date through the year (with January 1st as 1 and December 31st as 365).</td>
</tr>
<tr class="odd">
<td><code>is_na()</code></td>
<td>Returns <code>true</code> if this object is NA.</td>
</tr>
</tbody>
</table>
</section>
<section id="datevector-subsetting" class="level3" data-number="1.16.3">
<h3 data-number="1.16.3" class="anchored" data-anchor-id="datevector-subsetting"><span class="header-section-number">1.16.3</span> DateVector subsetting</h3>
<p>In Rcpp, both <code>DateVector</code> and <code>DateTimeVector</code> are internally stored as numeric types (specifically, doubles). This design simplifies certain internal calculations but can be confusing when working with individual elements of these vectors.</p>
<p>This behavior is important because when you subset a DateVector using the <code>[]</code> operator, you extract a <code>double</code>, which represents the date as the number of days since the <code>epoch date</code> (1970-01-01).</p>
<p>To work with individual <code>Date</code> or <code>DateTime</code> objects from a <code>DateVector</code> or <code>DateTimeVector</code>, you need to explicitly cast or convert the extracted element back into a <code>Date</code> or <code>DateTime</code> object.</p>
<p>Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> [[Rcpp<span class="sc">::</span>export]]</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>void <span class="fu">print_year_of_date</span>(DateVector dates) {</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (int <span class="at">i =</span> <span class="dv">0</span>; i <span class="sc">&lt;</span> <span class="fu">dates.size</span>(); <span class="sc">++</span>i) {</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>        <span class="sc">/</span><span class="er">/</span> Convert the extracted double to a Date object</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>        Date single_date <span class="ot">=</span> dates[i];  <span class="sc">/</span><span class="er">/</span> Convert double to Date</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>        int year <span class="ot">=</span> <span class="fu">single_date.getYear</span>();  <span class="sc">/</span><span class="er">/</span> Now you can call <span class="fu">getYear</span>()</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>        Rcpp<span class="sc">::</span>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"Year: "</span> <span class="sc">&lt;</span><span class="er">&lt;</span> year <span class="sc">&lt;</span><span class="er">&lt;</span> std<span class="sc">::</span>endl;</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>dates[i] returns a double by default.</li>
<li>Date single_date = dates[i];: We explicitly convert the double value to a Date object, allowing us to use the getYear() method.</li>
</ul>
</blockquote>
</section>
</section>
<section id="robject" class="level2" data-number="1.17">
<h2 data-number="1.17" class="anchored" data-anchor-id="robject"><span class="header-section-number">1.17</span> RObject</h2>
<p>The <code>RObject</code> type in Rcpp is a flexible and general-purpose type that can <strong>represent any kind of R object</strong>.</p>
<p>Here is an example that demonstrates how RObject can be used in Rcpp to accept and handle different types of R objects.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#include &lt;Rcpp.h&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>using namespace Rcpp;</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> [[Rcpp<span class="sc">::</span>export]]</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>void <span class="fu">handle_any_type</span>(RObject obj) {</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Check <span class="cf">if</span> the object is a NumericVector</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (obj.is<span class="sc">&lt;</span>NumericVector<span class="sc">&gt;</span>()) {</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>        NumericVector num_vec <span class="ot">=</span> as<span class="sc">&lt;</span>NumericVector<span class="sc">&gt;</span>(obj);</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>        Rcpp<span class="sc">::</span>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"Numeric Vector: "</span> <span class="sc">&lt;</span><span class="er">&lt;</span> num_vec <span class="sc">&lt;</span><span class="er">&lt;</span> std<span class="sc">::</span>endl;</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Check <span class="cf">if</span> the object is a CharacterVector</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (obj.is<span class="sc">&lt;</span>CharacterVector<span class="sc">&gt;</span>()) {</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>        CharacterVector char_vec <span class="ot">=</span> as<span class="sc">&lt;</span>CharacterVector<span class="sc">&gt;</span>(obj);</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>        Rcpp<span class="sc">::</span>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"Character Vector: "</span> <span class="sc">&lt;</span><span class="er">&lt;</span> char_vec <span class="sc">&lt;</span><span class="er">&lt;</span> std<span class="sc">::</span>endl;</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Check <span class="cf">if</span> the object is a List</span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> (obj.is<span class="sc">&lt;</span>List<span class="sc">&gt;</span>()) {</span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>        List lst <span class="ot">=</span> as<span class="sc">&lt;</span>List<span class="sc">&gt;</span>(obj);</span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>        Rcpp<span class="sc">::</span>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"List: "</span> <span class="sc">&lt;</span><span class="er">&lt;</span> lst <span class="sc">&lt;</span><span class="er">&lt;</span> std<span class="sc">::</span>endl;</span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">/</span> Handle unknown types</span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a>        Rcpp<span class="sc">::</span>Rcout <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">"Unknown type!"</span> <span class="sc">&lt;</span><span class="er">&lt;</span> std<span class="sc">::</span>endl;</span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="cnversion-using-as" class="level3" data-number="1.17.1">
<h3 data-number="1.17.1" class="anchored" data-anchor-id="cnversion-using-as"><span class="header-section-number">1.17.1</span> Cnversion using <code>as&lt;&gt;()</code>:</h3>
<ul>
<li><code>as&lt;&gt;()</code> is a template function in Rcpp that allows you to convert an <code>RObject</code> to a more specific type when you know the type of the object or have determined it dynamically.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>NumericVector num_vec <span class="ot">=</span> as<span class="sc">&lt;</span>NumericVector<span class="sc">&gt;</span>(obj);  <span class="sc">/</span><span class="er">/</span> Convert RObject to NumericVector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>This converts the RObject into a NumericVector when you are sure that it contains a numeric vector.</p>
</blockquote>
</section>
</section>
<section id="cautions-in-handling-rcpp-objects" class="level2" data-number="1.18">
<h2 data-number="1.18" class="anchored" data-anchor-id="cautions-in-handling-rcpp-objects"><span class="header-section-number">1.18</span> Cautions in handling Rcpp objects</h2>
<section id="assigning-between-vectors" class="level3" data-number="1.18.1">
<h3 data-number="1.18.1" class="anchored" data-anchor-id="assigning-between-vectors"><span class="header-section-number">1.18.1</span> Assigning between vectors</h3>
<p>In Rcpp, when you assign an object (like a vector, list, or matrix) v1 to another object v2 using the <code>=</code> operator (e.g., <code>v2 = v1</code>;), <strong>no deep copy</strong> is made. Instead, v2 <strong>becomes an alias</strong> to v1, meaning that both v1 and v2 point to <strong>the same underlying data in memory</strong>.</p>
<p>If you want v2 to be a completely independent copy of <code>v1</code>, so that changes to <code>v1</code> do not affect <code>v2</code>, you need to perform a <strong>deep copy</strong>. In Rcpp, you can use the <code>clone()</code> function to create a deep copy.</p>
</section>
<section id="data-type-of-numerical-index" class="level3" data-number="1.18.2">
<h3 data-number="1.18.2" class="anchored" data-anchor-id="data-type-of-numerical-index"><span class="header-section-number">1.18.2</span> Data type of numerical index</h3>
<p>You should use <code>R_xlen_t</code> as data type for numerical index or the number of elements to support <strong>long vector</strong> in your Rcpp code.</p>
</section>
<section id="return-type-of-operator" class="level3" data-number="1.18.3">
<h3 data-number="1.18.3" class="anchored" data-anchor-id="return-type-of-operator"><span class="header-section-number">1.18.3</span> Return type of operator <code>[]</code></h3>
<p>In Rcpp, when you access an element of a vector with [] or (), you do not directly get the element as its native type (e.g., double, int, or String). Instead, you get a Vector::Proxy object. This Proxy object acts as an intermediary that allows you to modify the vector element directly or retrieve its value, but <strong>it is not the same as the element’s actual type</strong>.</p>
<p>To resolve this, you either: + <strong>Assign</strong> <code>v[i]</code> to a new object of the expected type. + <strong>Convert</strong> the Proxy to the native type using <code>as&lt;T&gt;()</code>.</p>
</section>
</section>
<section id="r-like-functions" class="level2" data-number="1.19">
<h2 data-number="1.19" class="anchored" data-anchor-id="r-like-functions"><span class="header-section-number">1.19</span> R-like functions</h2>
<p>Here is a list of Rcpp functions similar to R functions.</p>
<p>If you know for certain that your vector <strong>does not contain any NA values</strong>, you can optimize your code by using the <code>noNA()</code> function. <code>noNA()</code> marks the vector as guaranteed to be free of <code>NA</code> values, which allows Rcpp to skip <code>NA</code> checks and perform calculations more efficiently.</p>
<blockquote class="blockquote">
<p>List is too long to illustrate.</p>
</blockquote>
</section>
<section id="probability-distribution" class="level2" data-number="1.20">
<h2 data-number="1.20" class="anchored" data-anchor-id="probability-distribution"><span class="header-section-number">1.20</span> Probability distribution</h2>
<p>In Rcpp, probability distribution functions exist in two different namespaces:</p>
<ol type="1">
<li><code>Rcpp::</code> namespace:</li>
</ol>
<ul>
<li><p>Functions in this namespace return vectors.</p></li>
<li><p>These functions are designed to be similar to their counterparts in base R. You can pass a vector of values to these functions and they will return a vector of results.</p></li>
</ul>
<ol start="2" type="1">
<li><code>R::</code> namespace:</li>
</ol>
<ul>
<li>Functions in this namespace return scalar values (a single value).</li>
<li>If you only need a single value from the distribution function, using the R:: version of the function can be more efficient because it avoids the overhead of vectorization.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>sort_cpp <span class="ot">&lt;-</span> <span class="st">'#include &lt;Rcpp.h&gt;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="st">using namespace Rcpp;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="st">// [[Rcpp::export]]</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="st">NumericVector sort_numeric_vector(NumericVector x) {</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="st">    std::sort(x.begin(), x.end());</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="st">    return x;</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="at">code=</span>sort_cpp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>